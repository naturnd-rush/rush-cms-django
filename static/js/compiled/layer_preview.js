import{g as Ge,a as $e}from"./graphql.js";import{l as S,w as oe,e as Je,g as We,c as ze,i as ue,b as Ae}from"./utils.js";var T="INUMBER",V="IOP1",H="IOP2",X="IOP3",R="IVAR",_="IVARNAME",$="IFUNCALL",re="IFUNDEF",m="IEXPR",fe="IEXPREVAL",B="IMEMBER",ne="IENDSTATEMENT",J="IARRAY";function v(e,t){this.type=e,this.value=t??0}v.prototype.toString=function(){switch(this.type){case T:case V:case H:case X:case R:case _:case ne:return this.value;case $:return"CALL "+this.value;case re:return"DEF "+this.value;case J:return"ARRAY "+this.value;case B:return"."+this.value;default:return"Invalid Instruction"}};function se(e){return new v(V,e)}function D(e){return new v(H,e)}function Ne(e){return new v(X,e)}function ce(e,t,r,n,s){for(var i=[],a=[],u,o,h,l,c=0;c<e.length;c++){var p=e[c],f=p.type;if(f===T||f===_)Array.isArray(p.value)?i.push.apply(i,ce(p.value.map(function(E){return new v(T,E)}).concat(new v(J,p.value.length)),t,r,n,s)):i.push(p);else if(f===R&&s.hasOwnProperty(p.value))p=new v(T,s[p.value]),i.push(p);else if(f===H&&i.length>1)o=i.pop(),u=i.pop(),l=r[p.value],p=new v(T,l(u.value,o.value)),i.push(p);else if(f===X&&i.length>2)h=i.pop(),o=i.pop(),u=i.pop(),p.value==="?"?i.push(u.value?o.value:h.value):(l=n[p.value],p=new v(T,l(u.value,o.value,h.value)),i.push(p));else if(f===V&&i.length>0)u=i.pop(),l=t[p.value],p=new v(T,l(u.value)),i.push(p);else if(f===m){for(;i.length>0;)a.push(i.shift());a.push(new v(m,ce(p.value,t,r,n,s)))}else if(f===B&&i.length>0)u=i.pop(),i.push(new v(T,u.value[p.value]));else{for(;i.length>0;)a.push(i.shift());a.push(p)}}for(;i.length>0;)a.push(i.shift());return a}function De(e,t,r){for(var n=[],s=0;s<e.length;s++){var i=e[s],a=i.type;if(a===R&&i.value===t)for(var u=0;u<r.tokens.length;u++){var o=r.tokens[u],h;o.type===V?h=se(o.value):o.type===H?h=D(o.value):o.type===X?h=Ne(o.value):h=new v(o.type,o.value),n.push(h)}else a===m?n.push(new v(m,De(i.value,t,r))):n.push(i)}return n}function F(e,t,r){var n=[],s,i,a,u,o,h;if(de(e))return L(e,r);for(var l=e.length,c=0;c<l;c++){var p=e[c],f=p.type;if(f===T||f===_)n.push(p.value);else if(f===H)i=n.pop(),s=n.pop(),p.value==="and"?n.push(s?!!F(i,t,r):!1):p.value==="or"?n.push(s?!0:!!F(i,t,r)):p.value==="="?(u=t.binaryOps[p.value],n.push(u(s,F(i,t,r),r))):(u=t.binaryOps[p.value],n.push(u(L(s,r),L(i,r))));else if(f===X)a=n.pop(),i=n.pop(),s=n.pop(),p.value==="?"?n.push(F(s?i:a,t,r)):(u=t.ternaryOps[p.value],n.push(u(L(s,r),L(i,r),L(a,r))));else if(f===R)if(p.value in t.functions)n.push(t.functions[p.value]);else if(p.value in t.unaryOps&&t.parser.isOperatorEnabled(p.value))n.push(t.unaryOps[p.value]);else{var E=r[p.value];if(E!==void 0)n.push(E);else throw new Error("undefined variable: "+p.value)}else if(f===V)s=n.pop(),u=t.unaryOps[p.value],n.push(u(L(s,r)));else if(f===$){for(h=p.value,o=[];h-- >0;)o.unshift(L(n.pop(),r));if(u=n.pop(),u.apply&&u.call)n.push(u.apply(void 0,o));else throw new Error(u+" is not a function")}else if(f===re)n.push(function(){for(var y=n.pop(),d=[],M=p.value;M-- >0;)d.unshift(n.pop());var x=n.pop(),O=function(){for(var U=Object.assign({},r),b=0,K=d.length;b<K;b++)U[d[b]]=arguments[b];return F(y,t,U)};return Object.defineProperty(O,"name",{value:x,writable:!1}),r[x]=O,O}());else if(f===m)n.push(Ve(p,t));else if(f===fe)n.push(p);else if(f===B)s=n.pop(),n.push(s[p.value]);else if(f===ne)n.pop();else if(f===J){for(h=p.value,o=[];h-- >0;)o.unshift(n.pop());n.push(o)}else throw new Error("invalid Expression")}if(n.length>1)throw new Error("invalid Expression (parity)");return n[0]===0?0:L(n[0],r)}function Ve(e,t,r){return de(e)?e:{type:fe,value:function(n){return F(e.value,t,n)}}}function de(e){return e&&e.type===fe}function L(e,t){return de(e)?e.value(t):e}function ve(e,t){for(var r=[],n,s,i,a,u,o,h=0;h<e.length;h++){var l=e[h],c=l.type;if(c===T)typeof l.value=="number"&&l.value<0?r.push("("+l.value+")"):Array.isArray(l.value)?r.push("["+l.value.map(me).join(", ")+"]"):r.push(me(l.value));else if(c===H)s=r.pop(),n=r.pop(),a=l.value,t?a==="^"?r.push("Math.pow("+n+", "+s+")"):a==="and"?r.push("(!!"+n+" && !!"+s+")"):a==="or"?r.push("(!!"+n+" || !!"+s+")"):a==="||"?r.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+s+")))"):a==="=="?r.push("("+n+" === "+s+")"):a==="!="?r.push("("+n+" !== "+s+")"):a==="["?r.push(n+"[("+s+") | 0]"):r.push("("+n+" "+a+" "+s+")"):a==="["?r.push(n+"["+s+"]"):r.push("("+n+" "+a+" "+s+")");else if(c===X)if(i=r.pop(),s=r.pop(),n=r.pop(),a=l.value,a==="?")r.push("("+n+" ? "+s+" : "+i+")");else throw new Error("invalid Expression");else if(c===R||c===_)r.push(l.value);else if(c===V)n=r.pop(),a=l.value,a==="-"||a==="+"?r.push("("+a+n+")"):t?a==="not"?r.push("(!"+n+")"):a==="!"?r.push("fac("+n+")"):r.push(a+"("+n+")"):a==="!"?r.push("("+n+"!)"):r.push("("+a+" "+n+")");else if(c===$){for(o=l.value,u=[];o-- >0;)u.unshift(r.pop());a=r.pop(),r.push(a+"("+u.join(", ")+")")}else if(c===re){for(s=r.pop(),o=l.value,u=[];o-- >0;)u.unshift(r.pop());n=r.pop(),t?r.push("("+n+" = function("+u.join(", ")+") { return "+s+" })"):r.push("("+n+"("+u.join(", ")+") = "+s+")")}else if(c===B)n=r.pop(),r.push(n+"."+l.value);else if(c===J){for(o=l.value,u=[];o-- >0;)u.unshift(r.pop());r.push("["+u.join(", ")+"]")}else if(c===m)r.push("("+ve(l.value,t)+")");else if(c!==ne)throw new Error("invalid Expression")}return r.length>1&&(t?r=[r.join(",")]:r=[r.join(";")]),String(r[0])}function me(e){return typeof e=="string"?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function G(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}function ye(e,t,r){r=r||{};for(var n=!!r.withMembers,s=null,i=0;i<e.length;i++){var a=e[i];a.type===R||a.type===_?!n&&!G(t,a.value)?t.push(a.value):(s!==null&&(G(t,s)||t.push(s)),s=a.value):a.type===B&&n&&s!==null?s+="."+a.value:a.type===m?ye(a.value,t,r):s!==null&&(G(t,s)||t.push(s),s=null)}s!==null&&!G(t,s)&&t.push(s)}function I(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}I.prototype.simplify=function(e){return e=e||{},new I(ce(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)};I.prototype.substitute=function(e,t){return t instanceof I||(t=this.parser.parse(String(t))),new I(De(this.tokens,e,t),this.parser)};I.prototype.evaluate=function(e){return e=e||{},F(this.tokens,this,e)};I.prototype.toString=function(){return ve(this.tokens,!1)};I.prototype.symbols=function(e){e=e||{};var t=[];return ye(this.tokens,t,e),t};I.prototype.variables=function(e){e=e||{};var t=[];ye(this.tokens,t,e);var r=this.functions;return t.filter(function(n){return!(n in r)})};I.prototype.toJSFunction=function(e,t){var r=this,n=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+ve(this.simplify(t).tokens,!0)+"; }");return function(){return n.apply(r,arguments)}};var Z="TEOF",g="TOP",ie="TNUMBER",Ue="TSTRING",N="TPAREN",W="TBRACKET",ae="TCOMMA",ge="TNAME",we="TSEMICOLON";function Fe(e,t,r){this.type=e,this.value=t,this.index=r}Fe.prototype.toString=function(){return this.type+": "+this.value};function k(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}k.prototype.newToken=function(e,t,r){return new Fe(e,t,r??this.pos)};k.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current};k.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent};k.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken(Z,"EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};k.prototype.isString=function(){var e=!1,t=this.pos,r=this.expression.charAt(t);if(r==="'"||r==='"')for(var n=this.expression.indexOf(r,t+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,this.expression.charAt(n-1)!=="\\"){var s=this.expression.substring(t+1,n);this.current=this.newToken(Ue,this.unescape(s),t),e=!0;break}n=this.expression.indexOf(r,n+1)}return e};k.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return e==="("||e===")"?(this.current=this.newToken(N,e),this.pos++,!0):!1};k.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return(e==="["||e==="]")&&this.isOperatorEnabled("[")?(this.current=this.newToken(W,e),this.pos++,!0):!1};k.prototype.isComma=function(){var e=this.expression.charAt(this.pos);return e===","?(this.current=this.newToken(ae,","),this.pos++,!0):!1};k.prototype.isSemicolon=function(){var e=this.expression.charAt(this.pos);return e===";"?(this.current=this.newToken(we,";"),this.pos++,!0):!1};k.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&r!=="."&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(n in this.consts)return this.current=this.newToken(ie,this.consts[n]),this.pos+=n.length,!0}return!1};k.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(g,n),this.pos+=n.length,!0}return!1};k.prototype.isName=function(){for(var e=this.pos,t=e,r=!1;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()){if(t===this.pos&&(n==="$"||n==="_")){n==="_"&&(r=!0);continue}else if(t===this.pos||!r||n!=="_"&&(n<"0"||n>"9"))break}else r=!0}if(r){var s=this.expression.substring(e,t);return this.current=this.newToken(ge,s),this.pos+=s.length,!0}return!1};k.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);(t===" "||t==="	"||t===`
`||t==="\r")&&(e=!0,this.pos++,!(this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var He=/^[0-9a-f]{4}$/i;k.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var r=e.substring(0,t);t>=0;){var n=e.charAt(++t);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"u":var s=e.substring(t+1,t+5);He.test(s)||this.parseError("Illegal escape sequence: \\u"+s),r+=String.fromCharCode(parseInt(s,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++t;var i=e.indexOf("\\",t);r+=e.substring(t,i<0?e.length:i),t=i}return r};k.prototype.isComment=function(){var e=this.expression.charAt(this.pos);return e==="/"&&this.expression.charAt(this.pos+1)==="*"?(this.pos=this.expression.indexOf("*/",this.pos)+2,this.pos===1&&(this.pos=this.expression.length),!0):!1};k.prototype.isRadixInteger=function(){var e=this.pos;if(e>=this.expression.length-2||this.expression.charAt(e)!=="0")return!1;++e;var t,r;if(this.expression.charAt(e)==="x")t=16,r=/^[0-9a-f]$/i,++e;else if(this.expression.charAt(e)==="b")t=2,r=/^[01]$/i,++e;else return!1;for(var n=!1,s=e;e<this.expression.length;){var i=this.expression.charAt(e);if(r.test(i))e++,n=!0;else break}return n&&(this.current=this.newToken(ie,parseInt(this.expression.substring(s,e),t)),this.pos=e),n};k.prototype.isNumber=function(){for(var e=!1,t=this.pos,r=t,n=t,s=!1,i=!1,a;t<this.expression.length&&(a=this.expression.charAt(t),a>="0"&&a<="9"||!s&&a===".");)a==="."?s=!0:i=!0,t++,e=i;if(e&&(n=t),a==="e"||a==="E"){t++;for(var u=!0,o=!1;t<this.expression.length;){if(a=this.expression.charAt(t),u&&(a==="+"||a==="-"))u=!1;else if(a>="0"&&a<="9")o=!0,u=!1;else break;t++}o||(t=n)}return e?(this.current=this.newToken(ie,parseFloat(this.expression.substring(r,t))),this.pos=t):this.pos=n,e};k.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if(t==="+"||t==="-"||t==="*"||t==="/"||t==="%"||t==="^"||t==="?"||t===":"||t===".")this.current=this.newToken(g,t);else if(t==="∙"||t==="•")this.current=this.newToken(g,"*");else if(t===">")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(g,">="),this.pos++):this.current=this.newToken(g,">");else if(t==="<")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(g,"<="),this.pos++):this.current=this.newToken(g,"<");else if(t==="|")if(this.expression.charAt(this.pos+1)==="|")this.current=this.newToken(g,"||"),this.pos++;else return!1;else if(t==="=")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(g,"=="),this.pos++):this.current=this.newToken(g,t);else if(t==="!")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(g,"!="),this.pos++):this.current=this.newToken(g,t);else return!1;return this.pos++,this.isOperatorEnabled(this.current.value)?!0:(this.pos=e,!1)};k.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)};k.prototype.getCoordinates=function(){var e=0,t,r=-1;do e++,t=this.pos-r,r=this.expression.indexOf(`
`,r+1);while(r>=0&&r<this.pos);return{line:e,column:t}};k.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)};function w(e,t,r){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=r.allowMemberAccess!==!1}w.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()};w.prototype.tokenMatches=function(e,t){return typeof t>"u"?!0:Array.isArray(t)?G(t,e.value):typeof t=="function"?t(e):e.value===t};w.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()};w.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken};w.prototype.accept=function(e,t){return this.nextToken.type===e&&this.tokenMatches(this.nextToken,t)?(this.next(),!0):!1};w.prototype.expect=function(e,t){if(!this.accept(e,t)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(t||e))}};w.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;function r(s){return s.value in t}if(this.accept(ge)||this.accept(g,r))e.push(new v(R,this.current.value));else if(this.accept(ie))e.push(new v(T,this.current.value));else if(this.accept(Ue))e.push(new v(T,this.current.value));else if(this.accept(N,"("))this.parseExpression(e),this.expect(N,")");else if(this.accept(W,"["))if(this.accept(W,"]"))e.push(new v(J,0));else{var n=this.parseArrayList(e);e.push(new v(J,n))}else throw new Error("unexpected "+this.nextToken)};w.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),!this.parseUntilEndStatement(e,t)&&this.pushExpression(e,t))};w.prototype.pushExpression=function(e,t){for(var r=0,n=t.length;r<n;r++)e.push(t[r])};w.prototype.parseUntilEndStatement=function(e,t){return this.accept(we)?(this.nextToken&&this.nextToken.type!==Z&&!(this.nextToken.type===N&&this.nextToken.value===")")&&t.push(new v(ne)),this.nextToken.type!==Z&&this.parseExpression(t),e.push(new v(m,t)),!0):!1};w.prototype.parseArrayList=function(e){for(var t=0;!this.accept(W,"]");)for(this.parseExpression(e),++t;this.accept(ae);)this.parseExpression(e),++t;return t};w.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(g,"=");){var t=e.pop(),r=[],n=e.length-1;if(t.type===$){if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var s=0,i=t.value+1;s<i;s++){var a=n-s;e[a].type===R&&(e[a]=new v(_,e[a].value))}this.parseVariableAssignmentExpression(r),e.push(new v(m,r)),e.push(new v(re,t.value));continue}if(t.type!==R&&t.type!==B)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),e.push(new v(_,t.value)),e.push(new v(m,r)),e.push(D("="))}};w.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(g,"?");){var t=[],r=[];this.parseConditionalExpression(t),this.expect(g,":"),this.parseConditionalExpression(r),e.push(new v(m,t)),e.push(new v(m,r)),e.push(Ne("?"))}};w.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(g,"or");){var t=[];this.parseAndExpression(t),e.push(new v(m,t)),e.push(D("or"))}};w.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(g,"and");){var t=[];this.parseComparison(t),e.push(new v(m,t)),e.push(D("and"))}};var Xe=["==","!=","<","<=",">=",">","in"];w.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(g,Xe);){var t=this.current;this.parseAddSub(e),e.push(D(t.value))}};var Ye=["+","-","||"];w.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(g,Ye);){var t=this.current;this.parseTerm(e),e.push(D(t.value))}};var Ke=["*","/","%"];w.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(g,Ke);){var t=this.current;this.parseFactor(e),e.push(D(t.value))}};w.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;function r(s){return s.value in t}if(this.save(),this.accept(g,r)){if(this.current.value!=="-"&&this.current.value!=="+"){if(this.nextToken.type===N&&this.nextToken.value==="("){this.restore(),this.parseExponential(e);return}else if(this.nextToken.type===we||this.nextToken.type===ae||this.nextToken.type===Z||this.nextToken.type===N&&this.nextToken.value===")"){this.restore(),this.parseAtom(e);return}}var n=this.current;this.parseFactor(e),e.push(se(n.value))}else this.parseExponential(e)};w.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(g,"^");)this.parseFactor(e),e.push(D("^"))};w.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(g,"!");)e.push(se("!"))};w.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;function r(i){return i.value in t}if(this.accept(g,r)){var n=this.current;this.parseAtom(e),e.push(se(n.value))}else for(this.parseMemberExpression(e);this.accept(N,"(");)if(this.accept(N,")"))e.push(new v($,0));else{var s=this.parseArgumentList(e);e.push(new v($,s))}};w.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(N,")");)for(this.parseExpression(e),++t;this.accept(ae);)this.parseExpression(e),++t;return t};w.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(g,".")||this.accept(W,"[");){var t=this.current;if(t.value==="."){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(ge),e.push(new v(B,this.current.value))}else if(t.value==="["){if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(W,"]"),e.push(D("["))}else throw new Error("unexpected symbol: "+t.value)}};function Ze(e,t){return Number(e)+Number(t)}function Qe(e,t){return e-t}function et(e,t){return e*t}function tt(e,t){return e/t}function rt(e,t){return e%t}function nt(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function st(e,t){return e===t}function it(e,t){return e!==t}function at(e,t){return e>t}function ot(e,t){return e<t}function ut(e,t){return e>=t}function pt(e,t){return e<=t}function ht(e,t){return!!(e&&t)}function lt(e,t){return!!(e||t)}function ct(e,t){return G(t,e)}function ft(e){return(Math.exp(e)-Math.exp(-e))/2}function dt(e){return(Math.exp(e)+Math.exp(-e))/2}function vt(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function yt(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function gt(e){return Math.log(e+Math.sqrt(e*e-1))}function wt(e){return Math.log((1+e)/(1-e))/2}function Oe(e){return Math.log(e)*Math.LOG10E}function Et(e){return-e}function kt(e){return!e}function Mt(e){return e<0?Math.ceil(e):Math.floor(e)}function xt(e){return Math.random()*(e||1)}function be(e){return Ee(e+1)}function At(e){return isFinite(e)&&e===Math.round(e)}var mt=4.7421875,pe=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Ee(e){var t,r;if(At(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var n=e-2,s=e-1;n>1;)s*=n,n--;return s===0&&(s=1),s}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Ee(1-e));if(e>=171.35)return 1/0;if(e>85){var i=e*e,a=i*e,u=a*e,o=u*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*i)-139/(51840*a)-571/(2488320*u)+163879/(209018880*o)+5246819/(75246796800*o*e))}--e,r=pe[0];for(var h=1;h<pe.length;++h)r+=pe[h]/(e+h);return t=e+mt+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*r}function Ot(e){return Array.isArray(e)?e.length:String(e).length}function Te(){for(var e=0,t=0,r=0;r<arguments.length;r++){var n=Math.abs(arguments[r]),s;t<n?(s=t/n,e=e*s*s+1,t=n):n>0?(s=n/t,e+=s*s):e+=n}return t===1/0?1/0:t*Math.sqrt(e)}function Se(e,t,r){return e?t:r}function bt(e,t){return typeof t>"u"||+t==0?Math.round(e):(e=+e,t=-+t,isNaN(e)||!(typeof t=="number"&&t%1===0)?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function Tt(e,t,r){return r&&(r[e]=t),t}function St(e,t){return e[t|0]}function It(e){return arguments.length===1&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function Pt(e){return arguments.length===1&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function Ct(e,t){if(typeof e!="function")throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(r,n){return e(r,n)})}function Lt(e,t,r){if(typeof e!="function")throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce(function(n,s,i){return e(n,s,i)},t)}function Rt(e,t){if(typeof e!="function")throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(r,n){return e(r,n)})}function Nt(e,t){if(!(Array.isArray(t)||typeof t=="string"))throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function Dt(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Ut(e){return(e>0)-(e<0)||+e}var Ie=1/3;function Ft(e){return e<0?-Math.pow(-e,Ie):Math.pow(e,Ie)}function _t(e){return Math.exp(e)-1}function Bt(e){return Math.log(1+e)}function qt(e){return Math.log(e)/Math.LN2}function q(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||ft,cosh:Math.cosh||dt,tanh:Math.tanh||vt,asinh:Math.asinh||yt,acosh:Math.acosh||gt,atanh:Math.atanh||wt,sqrt:Math.sqrt,cbrt:Math.cbrt||Ft,log:Math.log,log2:Math.log2||qt,ln:Math.log,lg:Math.log10||Oe,log10:Math.log10||Oe,expm1:Math.expm1||_t,log1p:Math.log1p||Bt,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||Mt,"-":Et,"+":Number,exp:Math.exp,not:kt,length:Ot,"!":be,sign:Math.sign||Ut},this.binaryOps={"+":Ze,"-":Qe,"*":et,"/":tt,"%":rt,"^":Math.pow,"||":nt,"==":st,"!=":it,">":at,"<":ot,">=":ut,"<=":pt,and:ht,or:lt,in:ct,"=":Tt,"[":St},this.ternaryOps={"?":Se},this.functions={random:xt,fac:be,min:Pt,max:It,hypot:Math.hypot||Te,pyt:Math.hypot||Te,pow:Math.pow,atan2:Math.atan2,if:Se,gamma:Ee,roundTo:bt,map:Ct,fold:Lt,filter:Rt,indexOf:Nt,join:Dt},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}q.prototype.parse=function(e){var t=[],r=new w(this,new k(this,e),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(t),r.expect(Z,"EOF"),new I(t,this)};q.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var _e=new q;q.parse=function(e){return _e.parse(e)};q.evaluate=function(e,t){return _e.parse(e).evaluate(t)};var Pe={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function jt(e){return Pe.hasOwnProperty(e)?Pe[e]:e}q.prototype.isOperatorEnabled=function(e){var t=jt(e),r=this.options.operators||{};return!(t in r)||!!r[t]};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var Gt=Object.prototype.toString,Y=Array.isArray||function(t){return Gt.call(t)==="[object Array]"};function ke(e){return typeof e=="function"}function $t(e){return Y(e)?"array":typeof e}function he(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Ce(e,t){return e!=null&&typeof e=="object"&&t in e}function Jt(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Wt=RegExp.prototype.test;function zt(e,t){return Wt.call(e,t)}var Vt=/\S/;function Ht(e){return!zt(Vt,e)}var Xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Yt(e){return String(e).replace(/[&<>"'`=\/]/g,function(r){return Xt[r]})}var Kt=/\s*/,Zt=/\s+/,Le=/\s*=/,Qt=/\s*\}/,er=/#|\^|\/|>|\{|&|=|!/;function tr(e,t){if(!e)return[];var r=!1,n=[],s=[],i=[],a=!1,u=!1,o="",h=0;function l(){if(a&&!u)for(;i.length;)delete s[i.pop()];else i=[];a=!1,u=!1}var c,p,f;function E(C){if(typeof C=="string"&&(C=C.split(Zt,2)),!Y(C)||C.length!==2)throw new Error("Invalid tags: "+C);c=new RegExp(he(C[0])+"\\s*"),p=new RegExp("\\s*"+he(C[1])),f=new RegExp("\\s*"+he("}"+C[1]))}E(t||P.tags);for(var y=new Q(e),d,M,x,O,U,b;!y.eos();){if(d=y.pos,x=y.scanUntil(c),x)for(var K=0,je=x.length;K<je;++K)O=x.charAt(K),Ht(O)?(i.push(s.length),o+=O):(u=!0,r=!0,o+=" "),s.push(["text",O,d,d+1]),d+=1,O===`
`&&(l(),o="",h=0,r=!1);if(!y.scan(c))break;if(a=!0,M=y.scan(er)||"name",y.scan(Kt),M==="="?(x=y.scanUntil(Le),y.scan(Le),y.scanUntil(p)):M==="{"?(x=y.scanUntil(f),y.scan(Qt),y.scanUntil(p),M="&"):x=y.scanUntil(p),!y.scan(p))throw new Error("Unclosed tag at "+y.pos);if(M==">"?U=[M,x,d,y.pos,o,h,r]:U=[M,x,d,y.pos],h++,s.push(U),M==="#"||M==="^")n.push(U);else if(M==="/"){if(b=n.pop(),!b)throw new Error('Unopened section "'+x+'" at '+d);if(b[1]!==x)throw new Error('Unclosed section "'+b[1]+'" at '+d)}else M==="name"||M==="{"||M==="&"?u=!0:M==="="&&E(x)}if(l(),b=n.pop(),b)throw new Error('Unclosed section "'+b[1]+'" at '+y.pos);return nr(rr(s))}function rr(e){for(var t=[],r,n,s=0,i=e.length;s<i;++s)r=e[s],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(t.push(r),n=r));return t}function nr(e){for(var t=[],r=t,n=[],s,i,a=0,u=e.length;a<u;++a)switch(s=e[a],s[0]){case"#":case"^":r.push(s),n.push(s),r=s[4]=[];break;case"/":i=n.pop(),i[5]=s[2],r=n.length>0?n[n.length-1][4]:t;break;default:r.push(s)}return t}function Q(e){this.string=e,this.tail=e,this.pos=0}Q.prototype.eos=function(){return this.tail===""};Q.prototype.scan=function(t){var r=this.tail.match(t);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};Q.prototype.scanUntil=function(t){var r=this.tail.search(t),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function z(e,t){this.view=e,this.cache={".":this.view},this.parent=t}z.prototype.push=function(t){return new z(t,this)};z.prototype.lookup=function(t){var r=this.cache,n;if(r.hasOwnProperty(t))n=r[t];else{for(var s=this,i,a,u,o=!1;s;){if(t.indexOf(".")>0)for(i=s.view,a=t.split("."),u=0;i!=null&&u<a.length;)u===a.length-1&&(o=Ce(i,a[u])||Jt(i,a[u])),i=i[a[u++]];else i=s.view[t],o=Ce(s.view,t);if(o){n=i;break}s=s.parent}r[t]=n}return ke(n)&&(n=n.call(this.view)),n};function A(){this.templateCache={_cache:{},set:function(t,r){this._cache[t]=r},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}A.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};A.prototype.parse=function(t,r){var n=this.templateCache,s=t+":"+(r||P.tags).join(":"),i=typeof n<"u",a=i?n.get(s):void 0;return a==null&&(a=tr(t,r),i&&n.set(s,a)),a};A.prototype.render=function(t,r,n,s){var i=this.getConfigTags(s),a=this.parse(t,i),u=r instanceof z?r:new z(r,void 0);return this.renderTokens(a,u,n,t,s)};A.prototype.renderTokens=function(t,r,n,s,i){for(var a="",u,o,h,l=0,c=t.length;l<c;++l)h=void 0,u=t[l],o=u[0],o==="#"?h=this.renderSection(u,r,n,s,i):o==="^"?h=this.renderInverted(u,r,n,s,i):o===">"?h=this.renderPartial(u,r,n,i):o==="&"?h=this.unescapedValue(u,r):o==="name"?h=this.escapedValue(u,r,i):o==="text"&&(h=this.rawValue(u)),h!==void 0&&(a+=h);return a};A.prototype.renderSection=function(t,r,n,s,i){var a=this,u="",o=r.lookup(t[1]);function h(p){return a.render(p,r,n,i)}if(o){if(Y(o))for(var l=0,c=o.length;l<c;++l)u+=this.renderTokens(t[4],r.push(o[l]),n,s,i);else if(typeof o=="object"||typeof o=="string"||typeof o=="number")u+=this.renderTokens(t[4],r.push(o),n,s,i);else if(ke(o)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");o=o.call(r.view,s.slice(t[3],t[5]),h),o!=null&&(u+=o)}else u+=this.renderTokens(t[4],r,n,s,i);return u}};A.prototype.renderInverted=function(t,r,n,s,i){var a=r.lookup(t[1]);if(!a||Y(a)&&a.length===0)return this.renderTokens(t[4],r,n,s,i)};A.prototype.indentPartial=function(t,r,n){for(var s=r.replace(/[^ \t]/g,""),i=t.split(`
`),a=0;a<i.length;a++)i[a].length&&(a>0||!n)&&(i[a]=s+i[a]);return i.join(`
`)};A.prototype.renderPartial=function(t,r,n,s){if(n){var i=this.getConfigTags(s),a=ke(n)?n(t[1]):n[t[1]];if(a!=null){var u=t[6],o=t[5],h=t[4],l=a;o==0&&h&&(l=this.indentPartial(a,h,u));var c=this.parse(l,i);return this.renderTokens(c,r,n,l,s)}}};A.prototype.unescapedValue=function(t,r){var n=r.lookup(t[1]);if(n!=null)return n};A.prototype.escapedValue=function(t,r,n){var s=this.getConfigEscape(n)||P.escape,i=r.lookup(t[1]);if(i!=null)return typeof i=="number"&&s===P.escape?String(i):s(i)};A.prototype.rawValue=function(t){return t[1]};A.prototype.getConfigTags=function(t){return Y(t)?t:t&&typeof t=="object"?t.tags:void 0};A.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!Y(t))return t.escape};var P={tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0},Me=new A;P.clearCache=function(){return Me.clearCache()};P.parse=function(t,r){return Me.parse(t,r)};P.render=function(t,r,n,s){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+$t(t)+'" was given as the first argument for mustache#render(template, view, partials)');return Me.render(t,r,n,s)};P.escape=Yt;P.Scanner=Q;P.Context=z;P.Writer=A;async function ee(){var t,r,n;const e=[];for(let s of document.querySelectorAll("tr[id*='stylesonlayer_set-']")){const i=(t=s.querySelector("select[id*='-style']"))==null?void 0:t.value,a=(r=s.querySelector("textarea[id*='feature_mapping']"))==null?void 0:r.value,u=(n=s.querySelector("textarea[id*='popup']"))==null?void 0:n.value;if(!(i&&a))continue;const o=await Ge(i);o!==null&&e.push({style:o,feature_mapping:a,popupTemplate:u!==void 0?u:null,inlineRow:s})}return{type:"Style",newStylesOnLayers:e}}async function Re(e){const t={type:"MapData",newGeoJsonData:null},r=e.title;if(r===null||r==="")return t;const n=await $e(r);if(n===null)return t;const s=JSON.parse(n.geojson);return s.features===null||s.features===void 0?t:{type:"MapData",newGeoJsonData:s}}const le={styles:{addEventListener:e=>{const t=document.getElementById("stylesonlayer_set-group");t!==null&&new MutationObserver(n=>{n.forEach(s=>{s.target instanceof HTMLSelectElement&&s.type==="childList"&&e(s)})}).observe(t,{childList:!0,subtree:!0})}},featureMappings:{addEventListener:e=>{document.addEventListener("input",t=>{const r=t.target;r instanceof HTMLTextAreaElement&&r.id.includes("feature_mapping")&&e(t)})}},popups:{addEventListener:e=>{document.addEventListener("input",t=>{const n=t.target instanceof HTMLDivElement;console.log("POPUP CHANGED"),n&&e(t)})}}};function xe(e,t){const r=new q;let n=[];for(let s of t){const i=s.inlineRow.querySelector("td[class*='feature_mapping']"),a=i==null?void 0:i.querySelector("div[id*='errors']");try{r.parse(s.feature_mapping).evaluate(ze(e.properties))===!0&&(n.push({style:s.style,popupTemplate:s.popupTemplate}),a&&i&&i.removeChild(a))}catch(u){if(a&&i&&i.removeChild(a),i&&!(i!=null&&i.querySelector("div[id*='errors']"))){const o=document.createElement("div");o.textContent=String(u),o.id="errors",o.style="color:rgb(255, 0, 0);",i.insertBefore(o,i.children[0])}}}return n}function sr(){return{fill:!0,fillColor:"#4B3EFF",fillOpacity:.3,stroke:!0,weight:1,opacity:1,color:"#4B3EFF",dashArray:"1 10",dashOffset:"0",lineCap:"round",lineJoin:"round"}}function ir(e){return r=>{if(e.stylesOnLayer.length==0)return sr();let n=xe(r,e.stylesOnLayer),s=!1,i,a,u=!1,o,h,l,c="",p,f="round",E="round";for(let y of n){const d=y.style;d.drawFill===!0&&(s=!0),d.drawStroke===!0&&(u=!0),i=ue(i,d.fillOpacity),o=ue(o,d.strokeOpacity),l=ue(l,d.strokeWeight),a===void 0?a=d.fillColor:a=Ae(a,d.fillColor,.5),h===void 0?h=d.strokeColor:h=Ae(h,d.strokeColor,.5),d.strokeDashArray!==null&&(c=d.strokeDashArray),d.strokeDashOffset!==null&&(p=d.strokeDashOffset),E=d.strokeLineJoin,f=d.strokeLineCap}return{fill:s,fillColor:a,fillOpacity:i,stroke:u,weight:l,opacity:o,color:h,dashArray:c,dashOffset:p,lineCap:f,lineJoin:E}}}function Be(e,t){return S.divIcon({html:`
            <div 
                style="
                    width: 32px;
                    height: 32px;
                    background-color: ${t.markerBackgroundColor};
                    opacity: ${t.markerIconOpacity};
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                "
            >
                <img 
                    src="${e+t.markerIcon}"
                    style="
                        width: 26px; 
                        height: 26px;
                    "
                />
            <div/>
        `,className:"",iconSize:[32,32],iconAnchor:[32/2,32/2]})}function ar(e,t){return(n,s)=>{let i=null;const a=xe(n,t.stylesOnLayer);for(let u of a){const o=u.style;if(o.drawMarker&&o.markerIcon.trimStart().trimEnd()!==""){i=o;break}}return i===null?S.marker(s):S.marker(s,{icon:Be(e,i)})}}function qe(){const e=document.getElementById("map-preview"),t=document.getElementById("map-spinner");e!==null&&t!==null?(e.classList.add("blur"),t.classList.remove("hidden")):console.error("Couldn't find map-preview and map-spinner in the DOM!")}function or(){const e=document.getElementById("map-preview"),t=document.getElementById("map-spinner");e!==null&&t!==null?(e.classList.remove("blur"),t.classList.add("hidden")):console.error("Couldn't find map-preview and map-spinner in the DOM!")}function te(e,t){setTimeout(()=>{t.isUpdating&&qe()},e*1e3)}function j(e,t,r){if(t.currentLayer!==null&&e.removeLayer(t.currentLayer),t.centroidMarkers.clearLayers(),r.type==="MapData"){const a=r.newGeoJsonData;a===null?t.currentLayer=null:(t.currentLayer=S.geoJSON(a),e.fitBounds(t.currentLayer.getBounds()))}else r.type==="Style"&&(t.stylesOnLayer=r.newStylesOnLayers);if(t.currentLayer===null)return;const n=Je("injected-media-url").innerHTML,s=t.stylesOnLayer.filter(a=>a.style.drawMarker==!0).length>0,i=S.geoJSON(t.currentLayer.toGeoJSON(),{style:ir(t),pointToLayer:ar(n,t),onEachFeature:(a,u)=>{const o=xe(a,t.stylesOnLayer);let h=null;for(let c of o)c.popupTemplate!==null&&c.popupTemplate!==""&&(h=c.popupTemplate),console.log("Popup template: ",h);if(h!==null&&u.bindPopup(h),a.geometry.type==="MultiPolygon"&&s){const c=a,p=o.filter(f=>f.style.drawMarker==!0);if(p.length>0){const f=p[0].style;for(let E of c.geometry.coordinates){const y=E[0],d=[];for(let O of y)d.push(new S.Point(O[0],O[1]));const M=We(d);S.marker(new S.LatLng(M.y,M.x),{icon:Be(n,f)}).addTo(t.centroidMarkers)}}}}});t.currentLayer=i,i.addTo(e),or(),t.isUpdating=!1}document.addEventListener("DOMContentLoaded",()=>{(async()=>{const e={minZoom:0,maxZoom:22,updateWhenIdle:!0,zIndex:0,attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>'},t="rushadmin",r="clw2m6f9b018001obfxcc747g",n="pk.eyJ1IjoicnVzaGFkbWluIiwiYSI6ImNsdzJtYmRydzBuNDIyam5yZ2pwMG16cnUifQ.SkSSdHcrPq4u8HSitBvJcg",s="https://api.mapbox.com/styles/v1/",i=`${t}/${r}/tiles/256/{z}/{x}/{y}@2x`,a=`?access_token=${n}`;let u=S.map("map-preview").setView([0,0],2);S.tileLayer(s+i+a,e).addTo(u);let o={isUpdating:!0,stylesOnLayer:[],currentLayer:null,centroidMarkers:new S.LayerGroup};o.centroidMarkers.addTo(u),(await oe("id_map_data_helptext")).appendChild(await oe("map-spinner")),qe();let h=!1;le.featureMappings.addEventListener(()=>h=!0),le.popups.addEventListener(()=>h=!0);const l=()=>{h===!0&&(o.isUpdating=!0,te(1,o),ee().then(E=>{j(u,o,E)})),h=!1,setTimeout(l,1e3)};setTimeout(l,1e3),le.styles.addEventListener(()=>{o.isUpdating=!0,te(1,o),ee().then(E=>{j(u,o,E)})}),document.addEventListener("visibilitychange",function(){document.visibilityState==="visible"&&(o.isUpdating=!0,te(1,o),ee().then(E=>{j(u,o,E)}))});const p=await oe("select2-id_map_data-container");new MutationObserver(E=>{E.forEach(y=>{y.type==="childList"&&(o.isUpdating=!0,te(1,o),Re(p).then(d=>j(u,o,d)))})}).observe(p,{childList:!0}),Promise.all([ee(),Re(p)]).then(([E,y])=>{j(u,o,y),j(u,o,E)})})()});
